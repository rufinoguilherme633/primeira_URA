version "8.2"
file version 0, 8
flow view {
}

audio {}

modules {}

dependencies {

}

constants {}

types {}

variables {

}

parameters {}

campaign record {}

contact record {}

workflow record {}

transferred record {}

contact profile extensions {}

outcome record {}

cursors {}

using namespaces {

}

subroutine DBG
	(
	Message: text
	)
{
	write Message
}

subroutine FASTSCRIPT_GENERATED()
{
	flow view element "__FLOW_ELEMENT_GENERATED#0" {
		end script
	}
}

on start {
	if @phone_info.state = PhoneState::alerting then {
		answer phone wait for connected
	}
	else {}
	goto node 'MAIN'
}

on end {}

node "MASTER" {
	id 1

}

node "MAIN" {
	id 2
	master "MASTER"
	variables {}
	cursors {}
	on first enter {
		play {
			expression '<\\\\10.1.1.53\\Audios\\primeira_ura\\bem_vindo.wav>'
		}
		var p_campanha: text
		p_campanha := 'agentesMadeiraBrasil'
		var v_campanha_info: CampaignInfo
		v_campanha_info := campaign_info(p_campanha)
		call DBG('Transferindo para campanha $(p_campanha) ')
		call DBG('Numero de Agentes Logados : $(v_campanha_info.nAgentsLogged)')
		if v_campanha_info.nAgentsLogged > 0 then {
			goto node 'MENU'
		}
		else {
			play {
				expression '<\\\\10.1.1.53\\Audios\\primeira_ura\\todos_ocupados.wav>'
			}
		}
	}
	on enter {}
	node loop {}
	on exit {}
}

node "MENU" {
	id 3
	master "MASTER"
	variables {
		MENU: text
	}
	cursors {}
	on first enter {}
	on enter {}
	node loop {
		play {
			expression '<\\\\10.1.1.53\\Audios\\primeira_ura\\menu.wav>'
		}
		get digits into MENU {
			input mode size 1
			on digits do {
				case MENU {
					when 1 do {
						goto node 'SUBMENU'
					}
					when 2 do {
						goto node 'COMERCIAL'
					}
					when 3 do {
						goto node 'FINANCEIRO'
					}
					default {
						play {
							expression '<\\\\10.1.1.53\\Audios\\primeira_ura\\opcao_invalida.wav>'
						}
						goto node 'MENU'
					}
				}
			}
			on timeout do {}
			on error do {}
		}
	}
	on exit {}
}

node "SUBMENU" {
	id 4
	master "MASTER"
	variables {
		SUBMENU: text
	}
	cursors {}
	on first enter {}
	on enter {}
	node loop {
		play {
			expression '<\\\\10.1.1.53\\Audios\\primeira_ura\\submenu.wav>'
		}
		get digits into SUBMENU {
			input mode size 1
			on digits do {}
			on timeout do {}
			on error do {}
		}
	}
	on exit {}
}

node "COMERCIAL" {
	id 5
	master "MASTER"
	variables {}
	cursors {}
	on first enter {}
	on enter {}
	node loop {}
	on exit {}
}

node "FINANCEIRO" {
	id 6
	master "MASTER"
	variables {}
	cursors {}
	on first enter {}
	on enter {}
	node loop {}
	on exit {}
}
<?xml version="1.0" encoding="UTF-8"?>
<asl_meta_data xml_spec_version="8.2">
  <debug_info />
  <asl_flow_info>
    <nodes>
      <start_node x="25" y="25">
        <flow_line_segments>
          <flow_line ix="47" iy="70" fx="47" fy="80" />
          <flow_line ix="47" iy="80" fx="59" fy="80" />
          <flow_line ix="59" iy="80" fx="59" fy="244" />
        </flow_line_segments>
      </start_node>
      <irs_node x="25" y="740" name="MASTER" />
      <irs_node x="25" y="244" name="MAIN" />
      <irs_node x="25" y="616" name="MENU">
        <flow_line_segments predef_on="digits" label_x="104" label_y="405">
          <flow_line ix="74" iy="690" fx="74" fy="700" />
          <flow_line ix="74" iy="700" fx="104" fy="700" />
          <flow_line ix="104" iy="700" fx="104" fy="110" />
          <flow_line ix="104" iy="110" fx="38" fy="110" />
          <flow_line ix="38" iy="110" fx="38" fy="120" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="104" label_y="529">
          <flow_line ix="133" iy="690" fx="133" fy="700" />
          <flow_line ix="133" iy="700" fx="104" fy="700" />
          <flow_line ix="104" iy="700" fx="104" fy="358" />
          <flow_line ix="104" iy="358" fx="38" fy="358" />
          <flow_line ix="38" iy="358" fx="38" fy="368" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="104" label_y="591">
          <flow_line ix="192" iy="690" fx="192" fy="700" />
          <flow_line ix="192" iy="700" fx="104" fy="700" />
          <flow_line ix="104" iy="700" fx="104" fy="482" />
          <flow_line ix="104" iy="482" fx="38" fy="482" />
          <flow_line ix="38" iy="482" fx="38" fy="492" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="133" label_y="710">
          <flow_line ix="251" iy="690" fx="251" fy="710" />
          <flow_line ix="251" iy="710" fx="15" fy="710" />
          <flow_line ix="15" iy="710" fx="15" fy="596" />
          <flow_line ix="15" iy="596" fx="53" fy="596" />
          <flow_line ix="53" iy="596" fx="53" fy="616" />
        </flow_line_segments>
      </irs_node>
      <irs_node x="25" y="120" name="SUBMENU" />
      <irs_node x="25" y="368" name="COMERCIAL" />
      <irs_node x="25" y="492" name="FINANCEIRO" />
      <flow_view_element x="25" y="864" name="__FLOW_ELEMENT_GENERATED#0" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MAIN" />
      <irs_node x="-1" y="-1" name="MENU">
        <flow_line_segments predef_on="digits" label_x="28" label_y="83">
          <flow_line ix="4" iy="73" fx="4" fy="83" />
          <flow_line ix="4" iy="83" fx="52" fy="83" />
          <flow_line ix="52" iy="83" fx="52" fy="120" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="52" label_y="225">
          <flow_line ix="19" iy="73" fx="19" fy="83" />
          <flow_line ix="19" iy="83" fx="52" fy="83" />
          <flow_line ix="52" iy="83" fx="52" fy="368" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="52" label_y="287">
          <flow_line ix="34" iy="73" fx="34" fy="83" />
          <flow_line ix="34" iy="83" fx="52" fy="83" />
          <flow_line ix="52" iy="83" fx="52" fy="492" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="267" label_y="416">
          <flow_line ix="49" iy="73" fx="49" fy="83" />
          <flow_line ix="49" iy="83" fx="267" fy="83" />
          <flow_line ix="267" iy="83" fx="267" fy="616" />
        </flow_line_segments>
      </irs_node>
      <irs_node x="-1" y="-1" name="MENU">
        <flow_line_segments predef_on="digits" label_x="35" label_y="83">
          <flow_line ix="4" iy="73" fx="4" fy="83" />
          <flow_line ix="4" iy="83" fx="66" fy="83" />
          <flow_line ix="66" iy="83" fx="66" fy="120" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="66" label_y="225">
          <flow_line ix="19" iy="73" fx="19" fy="83" />
          <flow_line ix="19" iy="83" fx="66" fy="83" />
          <flow_line ix="66" iy="83" fx="66" fy="368" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="66" label_y="287">
          <flow_line ix="34" iy="73" fx="34" fy="83" />
          <flow_line ix="34" iy="83" fx="66" fy="83" />
          <flow_line ix="66" iy="83" fx="66" fy="492" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="281" label_y="349">
          <flow_line ix="49" iy="73" fx="49" fy="83" />
          <flow_line ix="49" iy="83" fx="281" fy="83" />
          <flow_line ix="281" iy="83" fx="281" fy="616" />
        </flow_line_segments>
      </irs_node>
      <irs_node x="-1" y="-1" name="MENU">
        <flow_line_segments predef_on="digits" label_x="42" label_y="100">
          <flow_line ix="4" iy="73" fx="4" fy="100" />
          <flow_line ix="4" iy="100" fx="80" fy="100" />
          <flow_line ix="80" iy="100" fx="80" fy="120" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="34" label_y="210">
          <flow_line ix="19" iy="73" fx="19" fy="348" />
          <flow_line ix="19" iy="348" fx="80" fy="348" />
          <flow_line ix="80" iy="348" fx="80" fy="368" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="80" label_y="287">
          <flow_line ix="34" iy="73" fx="34" fy="83" />
          <flow_line ix="34" iy="83" fx="80" fy="83" />
          <flow_line ix="80" iy="83" fx="80" fy="492" />
        </flow_line_segments>
        <flow_line_segments predef_on="digits" label_x="295" label_y="361">
          <flow_line ix="49" iy="73" fx="49" fy="106" />
          <flow_line ix="49" iy="106" fx="295" fy="106" />
          <flow_line ix="295" iy="106" fx="295" fy="616" />
        </flow_line_segments>
      </irs_node>
    </nodes>
  </asl_flow_info>
</asl_meta_data>